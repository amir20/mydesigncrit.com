%nav.navbar.navbar-inverse.navbar-fixed-top{role: 'navigation', 'ng-controller' => 'HeaderCtrl'}
  .navbar-header
    %a.navbar-brand{href: '/', target: '_self'} DesignCrit.io

  %form.navbar-form.navbar-left
    .form-group
      %button.btn.btn-primary{type: 'submit', 'ng-click' => 'showModal()'} New Page

  = render 'layouts/login'


#project{'ng-controller' => 'ProjectCtrl', 'ng-init' => "projectId = '#{@project.id}'"}
  %sidebar{'selected-crit' => 'data.selectedCrit', 'hovered-crit' => 'data.hoveredCrit', 'crits' => 'data.selectedPage.crits'}

  %ul.nav.nav-tabs.ng-cloak
    %li{'ng-repeat' => 'page in data.pages', 'ng-class' => '{active: page.id == data.selectedPage.id}'}
      %a{'ng-href' => '/projects/{{data.project.id}}/pages/{{page.id}}'} {{ page.title }}

  #canvas
    %ng-view

%script{id: 'page.html', type: 'text/ng-template'}
  = render 'page'

%script{id: 'crit.html', type: 'text/ng-template'}
  = render 'crits/crit'

%script{id: 'sidebar.html', type: 'text/ng-template'}
  = render 'sidebar.html'

%script{id: 'newPageModal.html', type: 'text/ng-template'}
  .modal-dialog
    .modal-content
      .modal-header
        %h3 Add a new page

      .modal-body
        .input-group
          %span.input-group-addon Web page URL
          %input.form-control{name: 'url', placeholder: 'http://example.com', required: true, type: 'url', 'ng-model' => 'selected.url'}

      .modal-footer
        %button.btn.btn-warning{'ng-click' => 'cancel()'} Cancel
        %button.btn.btn-success{'ng-click' => 'add()', type: 'submit'} Add

