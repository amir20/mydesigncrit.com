(function(e){e.fn.retina=function(t){var n={retina_part:"-2x"};return t&&jQuery.extend(n,{retina_part:t}),window.devicePixelRatio>=2&&this.each(function(t,r){if(!e(r).attr("src"))return;var i=new RegExp("(.+)("+n.retina_part+"\\.\\w{3,4})");if(i.test(e(r).attr("src")))return;var s=e(r).attr("src").replace(/(.+)(\.\w{3,4})$/,"$1"+n.retina_part+"$2");e.ajax({url:s,type:"HEAD",success:function(){e(r).attr("src",s)}})}),this}})(jQuery)