(function(b,e){var c=b.document,h=(b.jQuery||b.Zepto||b.ender||c),m,d,f="keydown";function l(i,p){return(i===null)?p==="null":(i===undefined)?p==="undefined":(i.is&&i instanceof h)?p==="element":Object.prototype.toString.call(i).toLowerCase().indexOf(p)>7}if(h===c){m=function(i,p){return i?h.querySelector(i,p||h):h};d=function(p,i){p.addEventListener(f,i,false)};$f=function(s,p){var q=document.createEvent("Event"),r;q.initEvent(f,true,true);for(r in p){q[r]=p[r]}return(s||h).dispatchEvent(q)}}else{m=function(i,p,q){return h(i||c,p)};d=function(p,i){h(p).bind(f+".jwerty",i)};$f=function(p,i){h(p||c).trigger(h.Event(f,i))}}var k={16:"shiftKey",17:"ctrlKey",18:"altKey",91:"metaKey"};var j={mods:{"⇧":16,shift:16,"⌃":17,ctrl:17,"⌥":18,alt:18,option:18,"⌘":91,meta:91,cmd:91,"super":91,win:91},keys:{"⌫":8,backspace:8,"⇥":9,"⇆":9,tab:9,"↩":13,"return":13,enter:13,"⌅":13,pause:19,"pause-break":19,"⇪":20,caps:20,"caps-lock":20,"⎋":27,escape:27,esc:27,space:32,"↖":33,pgup:33,"page-up":33,"↘":34,pgdown:34,"page-down":34,"⇟":35,end:35,"⇞":36,home:36,ins:45,insert:45,del:45,"delete":45,"←":37,left:37,"arrow-left":37,"↑":38,up:38,"arrow-up":38,"→":39,right:39,"arrow-right":39,"↓":40,down:40,"arrow-down":40,"*":106,star:106,asterisk:106,multiply:106,"+":107,plus:107,"-":109,subtract:109,"=":187,equals:187,",":188,comma:188,".":190,period:190,"full-stop":190,"/":191,slash:191,"forward-slash":191,"`":192,tick:192,"back-quote":192,"[":219,"open-bracket":219,"\\":220,"back-slash":220,"]":221,"close-bracket":221,"'":222,quote:222,apostraphe:222}};g=95,n=0;while(++g<106){j.keys["num-"+n]=g;++n}g=47,n=0;while(++g<58){j.keys[n]=g;++n}g=111,n=1;while(++g<136){j.keys["f"+n]=g;++n}var g=64;while(++g<91){j.keys[String.fromCharCode(g).toLowerCase()]=g}function a(r){var t,u,q,v,w,p,y,s,x;if(r instanceof a){return r}if(!l(r,"array")){r=(String(r)).replace(/\s/g,"").toLowerCase().match(/(?:\+,|[^,])+/g)}for(t=0,u=r.length;t<u;++t){if(!l(r[t],"array")){r[t]=String(r[t]).match(/(?:\+\/|[^\/])+/g)}p=[],q=r[t].length;while(q--){var y=r[t][q];w={jwertyCombo:String(y),shiftKey:false,ctrlKey:false,altKey:false,metaKey:false};if(!l(y,"array")){y=String(y).toLowerCase().match(/(?:(?:[^\+])+|\+\+|^\+$)/g)}v=y.length;while(v--){if(y[v]==="++"){y[v]="+"}if(y[v] in j.mods){w[k[j.mods[y[v]]]]=true}else{if(y[v] in j.keys){w.keyCode=j.keys[y[v]]}else{s=y[v].match(/^\[([^-]+\-?[^-]*)-([^-]+\-?[^-]*)\]$/)}}}if(l(w.keyCode,"undefined")){if(s&&(s[1] in j.keys)&&(s[2] in j.keys)){s[2]=j.keys[s[2]];s[1]=j.keys[s[1]];for(x=s[1];x<s[2];++x){p.push({altKey:w.altKey,shiftKey:w.shiftKey,metaKey:w.metaKey,ctrlKey:w.ctrlKey,keyCode:x,jwertyCombo:String(y)})}w.keyCode=x}else{w.keyCode=0}}p.push(w)}this[t]=p}this.length=t;return this}var o=e.jwerty={event:function(r,s,q){if(l(s,"boolean")){var p=s;s=function(){return p}}r=new a(r);var t=0,w=r.length-1,v,u;return function(i){if((u=o.is(r,i,t))){if(t<w){++t;return}else{v=s.call(q||this,i,u);if(v===false){i.preventDefault()}t=0;return}}t=o.is(r,i)?1:0}},is:function(q,u,s){q=new a(q);s=s||0;q=q[s];u=u.originalEvent||u;var r,w=q.length,t=false;while(w--){t=q[w].jwertyCombo;for(var v in q[w]){if(v!=="jwertyCombo"&&u[v]!=q[w][v]){t=false}}if(t!==false){return t}}return t},key:function(q,s,p,i,v){var u=l(p,"element")||l(p,"string")?p:i,r=u===p?b:p,t=u===p?i:v;d(l(u,"element")?u:m(u,t),o.event(q,s,r))},fire:function(q,p,t,s){q=new a(q);var r=l(t,"number")?t:s;$f(l(p,"element")?p:m(p,t),q[r||0][0])},KEYS:j}}(this,(typeof module!=="undefined"&&module.exports?module.exports:this)));